"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.tasksRouter = void 0;
const express_1 = require("express");
const tasks_controllers_1 = require("../controllers/tasks.controllers");
const createTask_schema_1 = require("../schemas/createTask.schema");
const editTask_schema_1 = require("../schemas/editTask.schema");
const validateBody_midlewares_1 = require("../middlewares/validateBody.midlewares");
const verifyToken_middlewares_1 = require("../middlewares/verifyToken.middlewares");
const isTheTaskOwner_middlewares_1 = require("../middlewares/isTheTaskOwner.middlewares");
const doesBodyCategoryExist_midlewares_1 = require("../middlewares/doesBodyCategoryExist.midlewares");
const doesTaskExist_middlewares_1 = require("../middlewares/doesTaskExist.middlewares");
exports.tasksRouter = (0, express_1.Router)();
const tasksController = new tasks_controllers_1.TasksControllers();
exports.tasksRouter.post("/", verifyToken_middlewares_1.verifyToken.execute, validateBody_midlewares_1.ValidateBody.execute(createTask_schema_1.createTaskSchema), doesBodyCategoryExist_midlewares_1.DoesBodyCategoryExist.execute, tasksController.createTask);
exports.tasksRouter.get("/", verifyToken_middlewares_1.verifyToken.execute, tasksController.getTask);
exports.tasksRouter.get("/:id", verifyToken_middlewares_1.verifyToken.execute, doesTaskExist_middlewares_1.DoesTaskExist.execute, isTheTaskOwner_middlewares_1.isTheTaskOwner.execute, tasksController.getOneTask);
exports.tasksRouter.patch("/:id", verifyToken_middlewares_1.verifyToken.execute, doesTaskExist_middlewares_1.DoesTaskExist.execute, isTheTaskOwner_middlewares_1.isTheTaskOwner.execute, validateBody_midlewares_1.ValidateBody.execute(editTask_schema_1.editTaskSchema), tasksController.editTask);
exports.tasksRouter.delete("/:id", verifyToken_middlewares_1.verifyToken.execute, doesTaskExist_middlewares_1.DoesTaskExist.execute, isTheTaskOwner_middlewares_1.isTheTaskOwner.execute, tasksController.deleteTask);
